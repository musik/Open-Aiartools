# 测试页面说明

这个目录包含了用于开发和测试的各种页面，这些页面只在开发环境中可用。

## 支付成功页面测试工具

### 访问路径
- URL: `/[locale]/test/payment-success`
- 导航: 开发环境下，登录用户菜单中的"测试支付页面"

### 功能特性

#### 1. 测试参数配置
- **支付提供商**: Mock, Stripe, Creem
- **计划类型**: Pro订阅, 100积分包, 500积分包
- **会话ID**: 自定义session_id和checkout_id
- **支付金额**: 自定义金额和货币

#### 2. 测试操作
- **跳转到真实页面**: 使用配置的参数跳转到真实的支付成功页面
- **模拟支付成功**: 在当前页面模拟支付成功状态
- **测试数据刷新**: 测试用户数据强制刷新功能
- **测试Dashboard跳转**: 模拟支付成功后跳转到Dashboard的完整流程

#### 3. 实时预览
- 支付成功页面的模拟显示
- 当前用户状态信息
- 生成的测试URL预览

### 使用场景

#### 开发测试
```bash
1. 登录系统
2. 点击用户菜单 → "测试支付页面"
3. 配置测试参数
4. 点击"模拟支付成功"查看效果
5. 测试各种跳转和数据刷新功能
```

#### 功能验证
- ✅ 支付成功页面UI显示
- ✅ 用户认证状态检查
- ✅ 数据刷新机制
- ✅ Dashboard跳转逻辑
- ✅ 不同支付提供商的参数处理
- ✅ 错误处理和用户反馈

#### 回归测试
- 快速验证支付流程的关键节点
- 测试不同支付方案的兼容性
- 验证用户状态同步机制
- 检查认证和授权逻辑

### 安全注意事项

- 此页面仅在开发环境中可用 (`NODE_ENV === 'development'`)
- 不会执行真实的支付操作
- 不会调用真实的支付API
- 仅模拟前端状态和数据刷新

### 技术实现

#### 关键功能
1. **参数模拟**: 生成各种支付参数组合
2. **事件触发**: 模拟支付成功事件和数据刷新事件
3. **状态管理**: 管理模拟的支付状态数据
4. **URL生成**: 动态生成测试用的支付成功页面URL
5. **用户体验**: 提供与真实页面一致的交互体验

#### 集成测试
- 与用户认证系统集成
- 与数据刷新机制集成
- 与路由导航系统集成
- 与Toast通知系统集成

这个测试工具大大提高了支付功能的开发效率，无需每次都走完整的支付流程就能测试关键功能。
